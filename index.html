<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤</title>
<style>
/* –í–∞—à CSS –∫–æ–¥ –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
/* –í—Å—Ç–∞–≤—å—Ç–µ –í–ï–°–¨ –≤–∞—à CSS –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Ä–∞–Ω—å—à–µ */
</style>
</head>
<body>
<!-- –í–∞—à HTML –∫–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ—Å—Ç–∞–≤—å—Ç–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
<!-- –í—Å—Ç–∞–≤—å—Ç–µ –í–ï–°–¨ –≤–∞—à HTML –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Ä–∞–Ω—å—à–µ -->

<script>
// === –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô JavaScript –∫–æ–¥ ===

// –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const users = {
    'admin58': {name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä', password: '893612', role: 'admin', avatar: 'üëë'},
    'observer': {name: '–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å', password: 'observer123', role: 'observer', avatar: 'üëÅÔ∏è'},
    'user': {name: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å', password: 'user123', role: 'user', avatar: 'üë§'}
};

let currentUser = null;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
document.addEventListener('DOMContentLoaded', function() {
    console.log('–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
    const savedUser = localStorage.getItem('currentUser');
    if (savedUser) {
        currentUser = JSON.parse(savedUser);
        showAppInterface();
    }
    
    // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('[onclick*="showLoginModal"]').forEach(btn => {
        btn.onclick = showLoginModal;
    });
    
    document.querySelectorAll('[onclick*="showRegisterModal"]').forEach(btn => {
        btn.onclick = showRegisterModal;
    });
    
    document.querySelectorAll('[onclick*="enterDemoMode"]').forEach(btn => {
        btn.onclick = enterDemoMode;
    });
});

// –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤—Ö–æ–¥–∞
function showLoginModal() {
    console.log('showLoginModal –≤—ã–∑–≤–∞–Ω–∞');
    document.getElementById('loginModal').style.display = 'flex';
    setTimeout(() => {
        document.getElementById('loginModal').classList.add('active');
    }, 10);
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤—Ö–æ–¥–∞
function closeLoginModal() {
    document.getElementById('loginModal').classList.remove('active');
    setTimeout(() => {
        document.getElementById('loginModal').style.display = 'none';
    }, 300);
}

// –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
function showRegisterModal() {
    document.getElementById('registerModal').style.display = 'flex';
    setTimeout(() => {
        document.getElementById('registerModal').classList.add('active');
    }, 10);
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
function closeRegisterModal() {
    document.getElementById('registerModal').classList.remove('active');
    setTimeout(() => {
        document.getElementById('registerModal').style.display = 'none';
    }, 300);
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–∞
function handleLogin(event) {
    event.preventDefault();
    event.stopPropagation();
    
    const username = document.getElementById('loginUsername').value;
    const password = document.getElementById('loginPassword').value;
    
    console.log('–í—Ö–æ–¥:', username);
    
    if (users[username] && users[username].password === password) {
        currentUser = {
            username: username,
            name: users[username].name,
            role: users[username].role,
            avatar: users[username].avatar
        };
        
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        showAppInterface();
        closeLoginModal();
        showAlert('–í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω!', 'success');
    } else {
        showAlert('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å', 'danger');
    }
    
    return false;
}

// –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
function showAppInterface() {
    document.getElementById('authScreen').style.display = 'none';
    document.getElementById('header').style.display = 'flex';
    document.getElementById('sidebar').style.display = 'block';
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    document.getElementById('userPanel').innerHTML = `
        <div class="user-avatar">${currentUser.avatar}</div>
        <div class="user-info">
            <div class="user-name">${currentUser.name}</div>
            <div class="user-role">${getRoleName(currentUser.role)}</div>
            <div class="control-panel">
                <button class="btn-logout" onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
            </div>
        </div>
    `;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞—à–±–æ—Ä–¥
    showSection('dashboard');
}

// –í—ã—Ö–æ–¥
function logout() {
    currentUser = null;
    localStorage.removeItem('currentUser');
    document.getElementById('authScreen').style.display = 'flex';
    document.getElementById('header').style.display = 'none';
    document.getElementById('sidebar').style.display = 'none';
    showAlert('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'info');
}

// –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª
function showSection(sectionId) {
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª
    document.getElementById(sectionId).classList.add('active');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ–Ω—é
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
    });
}

// –ù–∞–∑–∞–¥
function goBack() {
    showSection('dashboard');
}

// –î–µ–º–æ-—Ä–µ–∂–∏–º
function enterDemoMode() {
    // –ê–≤—Ç–æ–≤—Ö–æ–¥ –∫–∞–∫ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å
    currentUser = {
        username: 'observer',
        name: '–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å',
        role: 'observer',
        avatar: 'üëÅÔ∏è'
    };
    
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    showAppInterface();
    showAlert('–î–µ–º–æ-—Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω', 'success');
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function getRoleName(role) {
    const roles = {
        'admin': '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
        'observer': '–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å',
        'user': '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'
    };
    return roles[role] || role;
}

function showAlert(message, type) {
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type}`;
    alertDiv.innerHTML = message;
    alertDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        max-width: 400px;
    `;
    
    document.body.appendChild(alertDiv);
    
    setTimeout(() => {
        document.body.removeChild(alertDiv);
    }, 3000);
}

// –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
window.showLoginModal = showLoginModal;
window.closeLoginModal = closeLoginModal;
window.showRegisterModal = showRegisterModal;
window.closeRegisterModal = closeRegisterModal;
window.handleLogin = handleLogin;
window.handleRegister = function(e) {
    e.preventDefault();
    showAlert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏', 'info');
    return false;
};
window.enterDemoMode = enterDemoMode;
window.showSection = showSection;
window.goBack = goBack;
window.logout = logout;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.onload = function() {
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏
    document.querySelectorAll('.modal').forEach(modal => {
        modal.onclick = function(e) {
            if (e.target === this) {
                if (this.id === 'loginModal') closeLoginModal();
                if (this.id === 'registerModal') closeRegisterModal();
            }
        };
    });
};
</script>
</body>
</html>
